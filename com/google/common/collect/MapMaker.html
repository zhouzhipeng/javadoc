<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_112) on Sat Sep 01 15:31:31 CST 2018 -->
<title>MapMaker</title>
<meta name="date" content="2018-09-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MapMaker";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.google.common.collect</div>
<h2 title="类 MapMaker" class="title">类 MapMaker</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.google.common.collect.MapMaker</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="../../../../com/google/common/annotations/GwtCompatible.html" title="com.google.common.annotations中的注释">@GwtCompatible</a>(<a href="../../../../com/google/common/annotations/GwtCompatible.html#emulated--">emulated</a>=true)
public final class <span class="typeNameLabel">MapMaker</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></pre>
<div class="block"><p>A builder of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true" title="java.util.concurrent中的类或接口"><code>ConcurrentMap</code></a> instances that can have keys or values automatically
 wrapped in <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口">weak</a> references.

 <p>Usage example: <pre>   <code>

   ConcurrentMap&lt;Request, Stopwatch&gt; timers = new MapMaker()
       .concurrencyLevel(4)
       .weakKeys()
       .makeMap();</code></pre>

 <p>These features are all optional; <code>new MapMaker().makeMap()</code> returns a valid concurrent
 map that behaves similarly to a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="java.util.concurrent中的类或接口"><code>ConcurrentHashMap</code></a>.

 <p>The returned map is implemented as a hash table with similar performance characteristics to
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="java.util.concurrent中的类或接口"><code>ConcurrentHashMap</code></a>. It supports all optional operations of the <code>ConcurrentMap</code>
 interface. It does not permit null keys or values.

 <p><b>Note:</b> by default, the returned map uses equality comparisons (the <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口"><code>equals</code></a> method) to determine equality for keys or values. However, if <a href="../../../../com/google/common/collect/MapMaker.html#weakKeys--"><code>weakKeys()</code></a> was
 specified, the map uses identity (<code>==</code>) comparisons instead for keys. Likewise, if
 <a href="../../../../com/google/common/collect/MapMaker.html#weakValues--"><code>weakValues()</code></a> was specified, the map uses identity comparisons for values.

 <p>The view collections of the returned map have <i>weakly consistent iterators</i>. This means
 that they are safe for concurrent use, but if other threads modify the map after the iterator is
 created, it is undefined which of these changes, if any, are reflected in that iterator. These
 iterators never throw <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ConcurrentModificationException.html?is-external=true" title="java.util中的类或接口"><code>ConcurrentModificationException</code></a>.

 <p>If <a href="../../../../com/google/common/collect/MapMaker.html#weakKeys--"><code>weakKeys()</code></a> or <a href="../../../../com/google/common/collect/MapMaker.html#weakValues--"><code>weakValues()</code></a> are requested, it is possible for a key or value
 present in the map to be reclaimed by the
 garbage collector. Entries with reclaimed keys or values may be removed from the map on each map
 modification or on occasional map accesses; such entries may be counted by <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true#size--" title="java.util中的类或接口"><code>Map.size()</code></a>, but
 will never be visible to read or write operations. A partially-reclaimed entry is never exposed
 to the user. Any <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.Entry.html?is-external=true" title="java.util中的类或接口"><code>Map.Entry</code></a> instance retrieved from the map's
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true#entrySet--" title="java.util中的类或接口">entry set</a> is a snapshot of that entry's state at the time of retrieval;
 such entries do, however, support <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.Entry.html?is-external=true#setValue-V-" title="java.util中的类或接口"><code>Map.Entry.setValue(V)</code></a>, which simply calls
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true#put-K-V-" title="java.util中的类或接口"><code>Map.put(K, V)</code></a> on the entry's key.

 <p>The maps produced by <code>MapMaker</code> are serializable, and the deserialized maps retain all
 the configuration properties of the original map. During deserialization, if the original map had
 used weak references, the entries are reconstructed as they were, but it's not unlikely they'll
 be quickly garbage-collected before they are ever accessed.

 <p><code>new MapMaker().weakKeys().makeMap()</code> is a recommended replacement for
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/WeakHashMap.html?is-external=true" title="java.util中的类或接口"><code>WeakHashMap</code></a>, but note that it compares keys using object identity whereas
 <code>WeakHashMap</code> uses <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口"><code>Object.equals(java.lang.Object)</code></a>.</div>
<dl>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>2.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#MapMaker--">MapMaker</a></span>()</code>
<div class="block">Constructs a new <code>MapMaker</code> instance with default settings, including strong keys, strong
 values, and no automatic eviction of any kind.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#concurrencyLevel-int-">concurrencyLevel</a></span>(int&nbsp;concurrencyLevel)</code>
<div class="block">Guides the allowed concurrency among update operations.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#initialCapacity-int-">initialCapacity</a></span>(int&nbsp;initialCapacity)</code>
<div class="block">Sets the minimum total size for the internal hash tables.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;K,V&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true" title="java.util.concurrent中的类或接口">ConcurrentMap</a>&lt;K,V&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#makeMap--">makeMap</a></span>()</code>
<div class="block">Builds a thread-safe map.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#toString--">toString</a></span>()</code>
<div class="block">Returns a string representation for this MapMaker instance.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#weakKeys--">weakKeys</a></span>()</code>
<div class="block">Specifies that each key (not value) stored in the map should be wrapped in a
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口"><code>WeakReference</code></a> (by default, strong references are used).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/google/common/collect/MapMaker.html#weakValues--">weakValues</a></span>()</code>
<div class="block">Specifies that each value (not key) stored in the map should be wrapped in a
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口"><code>WeakReference</code></a> (by default, strong references are used).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="java.lang中的类或接口">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="java.lang中的类或接口">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="java.lang中的类或接口">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="java.lang中的类或接口">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="java.lang中的类或接口">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="java.lang中的类或接口">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="java.lang中的类或接口">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="MapMaker--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MapMaker</h4>
<pre>public&nbsp;MapMaker()</pre>
<div class="block">Constructs a new <code>MapMaker</code> instance with default settings, including strong keys, strong
 values, and no automatic eviction of any kind.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="initialCapacity-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialCapacity</h4>
<pre>public&nbsp;<a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a>&nbsp;initialCapacity(int&nbsp;initialCapacity)</pre>
<div class="block">Sets the minimum total size for the internal hash tables. For example, if the initial capacity
 is <code>60</code>, and the concurrency level is <code>8</code>, then eight segments are created, each
 having a hash table of size eight. Providing a large enough estimate at construction time
 avoids the need for expensive resizing operations later, but setting this value unnecessarily
 high wastes memory.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="java.lang中的类或接口">IllegalArgumentException</a></code> - if <code>initialCapacity</code> is negative</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if an initial capacity was already set</dd>
</dl>
</li>
</ul>
<a name="concurrencyLevel-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>concurrencyLevel</h4>
<pre>public&nbsp;<a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a>&nbsp;concurrencyLevel(int&nbsp;concurrencyLevel)</pre>
<div class="block">Guides the allowed concurrency among update operations. Used as a hint for internal sizing. The
 table is internally partitioned to try to permit the indicated number of concurrent updates
 without contention. Because assignment of entries to these partitions is not necessarily
 uniform, the actual concurrency observed may vary. Ideally, you should choose a value to
 accommodate as many threads as will ever concurrently modify the table. Using a significantly
 higher value than you need can waste space and time, and a significantly lower value can lead
 to thread contention. But overestimates and underestimates within an order of magnitude do not
 usually have much noticeable impact. A value of one permits only one thread to modify the map
 at a time, but since read operations can proceed concurrently, this still yields higher
 concurrency than full synchronization. Defaults to 4.

 <p><b>Note:</b> Prior to Guava release 9.0, the default was 16. It is possible the default will
 change again in the future. If you care about this value, you should always choose it
 explicitly.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="java.lang中的类或接口">IllegalArgumentException</a></code> - if <code>concurrencyLevel</code> is nonpositive</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if a concurrency level was already set</dd>
</dl>
</li>
</ul>
<a name="weakKeys--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>weakKeys</h4>
<pre><a href="../../../../com/google/common/annotations/GwtIncompatible.html" title="com.google.common.annotations中的注释">@GwtIncompatible</a>
public&nbsp;<a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a>&nbsp;weakKeys()</pre>
<div class="block">Specifies that each key (not value) stored in the map should be wrapped in a
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口"><code>WeakReference</code></a> (by default, strong references are used).

 <p><b>Warning:</b> when this method is used, the resulting map will use identity (<code>==</code>)
 comparison to determine equality of keys, which is a technical violation of the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口"><code>Map</code></a>
 specification, and may not be what you expect.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if the key strength was already set</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口"><code>WeakReference</code></a></dd>
</dl>
</li>
</ul>
<a name="weakValues--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>weakValues</h4>
<pre><a href="../../../../com/google/common/annotations/GwtIncompatible.html" title="com.google.common.annotations中的注释">@GwtIncompatible</a>
public&nbsp;<a href="../../../../com/google/common/collect/MapMaker.html" title="com.google.common.collect中的类">MapMaker</a>&nbsp;weakValues()</pre>
<div class="block">Specifies that each value (not key) stored in the map should be wrapped in a
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口"><code>WeakReference</code></a> (by default, strong references are used).

 <p>Weak values will be garbage collected once they are weakly reachable. This makes them a poor
 candidate for caching.

 <p><b>Warning:</b> when this method is used, the resulting map will use identity (<code>==</code>)
 comparison to determine equality of values. This technically violates the specifications of the
 methods <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true#containsValue-java.lang.Object-" title="java.util中的类或接口"><code>containsValue</code></a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true#remove-java.lang.Object-java.lang.Object-" title="java.util.concurrent中的类或接口"><code>remove(Object, Object)</code></a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true#replace-K-V-V-" title="java.util.concurrent中的类或接口"><code>replace(K, V,
 V)</code></a>, and may not be what you expect.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="java.lang中的类或接口">IllegalStateException</a></code> - if the value strength was already set</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="java.lang.ref中的类或接口"><code>WeakReference</code></a></dd>
</dl>
</li>
</ul>
<a name="makeMap--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeMap</h4>
<pre>public&nbsp;&lt;K,V&gt;&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true" title="java.util.concurrent中的类或接口">ConcurrentMap</a>&lt;K,V&gt;&nbsp;makeMap()</pre>
<div class="block">Builds a thread-safe map. This method does not alter the state of this <code>MapMaker</code>
 instance, so it can be invoked again to create multiple independent maps.

 <p>The bulk operations <code>putAll</code>, <code>equals</code>, and <code>clear</code> are not guaranteed to
 be performed atomically on the returned map. Additionally, <code>size</code> and
 <code>containsValue</code> are implemented as bulk read operations, and thus may fail to observe
 concurrent writes.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a serializable concurrent map having the requested features</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toString()</pre>
<div class="block">Returns a string representation for this MapMaker instance. The exact form of the returned
 string is not specified.</div>
<dl>
<dt><span class="overrideSpecifyLabel">覆盖:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="java.lang中的类或接口">toString</a></code>&nbsp;在类中&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
