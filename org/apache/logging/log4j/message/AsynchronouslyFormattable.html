<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_112) on Sat Sep 01 15:33:46 CST 2018 -->
<title>AsynchronouslyFormattable</title>
<meta name="date" content="2018-09-01">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsynchronouslyFormattable";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.logging.log4j.message</div>
<h2 title="注释类型 AsynchronouslyFormattable" class="title">注释类型 AsynchronouslyFormattable</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Documented.html?is-external=true" title="java.lang.annotation中的类或接口">@Documented</a>
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true" title="java.lang.annotation中的类或接口">@Target</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true#value--" title="java.lang.annotation中的类或接口">value</a>=<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="java.lang.annotation中的类或接口">TYPE</a>)
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true" title="java.lang.annotation中的类或接口">@Retention</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true#value--" title="java.lang.annotation中的类或接口">value</a>=<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="java.lang.annotation中的类或接口">RUNTIME</a>)
public @interface <span class="memberNameLabel">AsynchronouslyFormattable</span></pre>
<div class="block">Annotation that signals to asynchronous logging components that messages of this type can safely be passed to
 a background thread without calling <a href="../../../../../org/apache/logging/log4j/message/Message.html#getFormattedMessage--"><code>Message.getFormattedMessage()</code></a> first.
 <p>
 Generally, logging mutable objects asynchronously always has the risk that the object is modified between the time
 the logger is called and the time the log message is formatted and written to disk. Strictly speaking it is the
 responsibility of the application to ensure that mutable objects are not modified after they have been logged,
 but this is not always possible.
 </p><p>
 Log4j prevents the above race condition as follows:
 </p><ol>
 <li>If the Message implements <a href="../../../../../org/apache/logging/log4j/message/ReusableMessage.html" title="org.apache.logging.log4j.message中的接口"><code>ReusableMessage</code></a>, asynchronous logging components in the Log4j implementation
 will copy the message content (formatted message, parameters) onto the queue rather than passing the
 <code>Message</code> instance itself. This ensures that the formatted message will not change
 when the mutable object is modified.
 </li>
 <li>If the Message is annotated with <a href="../../../../../org/apache/logging/log4j/message/AsynchronouslyFormattable.html" title="org.apache.logging.log4j.message中的注释"><code>AsynchronouslyFormattable</code></a>, it can be passed to another thread as is.</li>
 <li>Otherwise, asynchronous logging components in the Log4j implementation will call
 <a href="../../../../../org/apache/logging/log4j/message/Message.html#getFormattedMessage--"><code>Message.getFormattedMessage()</code></a> before passing the Message object to another thread.
 This gives the Message implementation class a chance to create a formatted message String with the current value
 of the mutable object. The intention is that the Message implementation caches this formatted message and returns
 it on subsequent calls.
 (See <a href="https://issues.apache.org/jira/browse/LOG4J2-763">LOG4J2-763</a>.)
 </li>
 </ol></div>
<dl>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>2.8</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../org/apache/logging/log4j/message/Message.html" title="org.apache.logging.log4j.message中的接口"><code>Message</code></a>, 
<a href="../../../../../org/apache/logging/log4j/message/ReusableMessage.html" title="org.apache.logging.log4j.message中的接口"><code>ReusableMessage</code></a>, 
<a href="https://issues.apache.org/jira/browse/LOG4J2-763">LOG4J2-763</a></dd>
</dl>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
