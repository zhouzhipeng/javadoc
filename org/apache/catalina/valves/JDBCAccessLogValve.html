<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_112) on Sat Sep 01 15:33:53 CST 2018 -->
<title>JDBCAccessLogValve</title>
<meta name="date" content="2018-09-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="JDBCAccessLogValve";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.catalina.valves</div>
<h2 title="类 JDBCAccessLogValve" class="title">类 JDBCAccessLogValve</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/catalina/util/LifecycleBase.html" title="org.apache.catalina.util中的类">org.apache.catalina.util.LifecycleBase</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html" title="org.apache.catalina.util中的类">org.apache.catalina.util.LifecycleMBeanBase</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/catalina/valves/ValveBase.html" title="org.apache.catalina.valves中的类">org.apache.catalina.valves.ValveBase</a></li>
<li>
<ul class="inheritance">
<li>org.apache.catalina.valves.JDBCAccessLogValve</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/javax/management/MBeanRegistration.html?is-external=true" title="javax.management中的类或接口">MBeanRegistration</a>, org.apache.catalina.AccessLog, org.apache.catalina.Contained, org.apache.catalina.JmxEnabled, org.apache.catalina.Lifecycle, <a href="../../../../org/apache/catalina/Valve.html" title="org.apache.catalina中的接口">Valve</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">JDBCAccessLogValve</span>
extends <a href="../../../../org/apache/catalina/valves/ValveBase.html" title="org.apache.catalina.valves中的类">ValveBase</a>
implements org.apache.catalina.AccessLog</pre>
<div class="block"><p>
 This Tomcat extension logs server access directly to a database, and can
 be used instead of the regular file-based access log implemented in
 AccessLogValve.
 To use, copy into the server/classes directory of the Tomcat installation
 and configure in server.xml as:
 </p>
 <pre>
      &lt;Valve className="org.apache.catalina.valves.JDBCAccessLogValve"
          driverName="<i>your_jdbc_driver</i>"
          connectionURL="<i>your_jdbc_url</i>"
          pattern="combined" resolveHosts="false"
      /&gt;
 </pre>
 <p>
 Many parameters can be configured, such as the database connection (with
 <code>driverName</code> and <code>connectionURL</code>),
 the table name (<code>tableName</code>)
 and the field names (corresponding to the get/set method names).
 The same options as AccessLogValve are supported, such as
 <code>resolveHosts</code> and <code>pattern</code> ("common" or "combined"
 only).
 </p>
 <p>
 When Tomcat is started, a database connection is created and used for all the
 log activity. When Tomcat is shutdown, the database connection is closed.
 This logger can be used at the level of the Engine context (being shared
 by all the defined hosts) or the Host context (one instance of the logger
 per host, possibly using different databases).
 </p>
 <p>
 The database table can be created with the following command:
 </p>
 <pre>
 CREATE TABLE access (
 id INT UNSIGNED AUTO_INCREMENT NOT NULL,
 remoteHost CHAR(15) NOT NULL,
 userName CHAR(15),
 timestamp TIMESTAMP NOT NULL,
 virtualHost VARCHAR(64) NOT NULL,
 method VARCHAR(8) NOT NULL,
 query VARCHAR(255) NOT NULL,
 status SMALLINT UNSIGNED NOT NULL,
 bytes INT UNSIGNED NOT NULL,
 referer VARCHAR(128),
 userAgent VARCHAR(128),
 PRIMARY KEY (id),
 INDEX (timestamp),
 INDEX (remoteHost),
 INDEX (virtualHost),
 INDEX (query),
 INDEX (userAgent)
 );
 </pre>
 <p>Set JDBCAccessLogValve attribute useLongContentLength="true" as you have more then 4GB outputs.
 Please, use long SQL datatype at access.bytes attribute.
 The datatype of bytes at oracle is <i>number</i> and other databases use <i>bytes BIGINT NOT NULL</i>.
 </p>

 <p>
 If the table is created as above, its name and the field names don't need
 to be defined.
 </p>
 <p>
 If the request method is "common", only these fields are used:
 <code>remoteHost, user, timeStamp, query, status, bytes</code>
 </p>
 <p>
 <i>TO DO: provide option for excluding logging of certain MIME types.</i>
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.apache.catalina.Lifecycle">
<!--   -->
</a>
<h3>从接口继承的嵌套类/接口&nbsp;org.apache.catalina.Lifecycle</h3>
<code>org.apache.catalina.Lifecycle.SingleUse</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.catalina.valves.ValveBase">
<!--   -->
</a>
<h3>从类继承的字段&nbsp;org.apache.catalina.valves.<a href="../../../../org/apache/catalina/valves/ValveBase.html" title="org.apache.catalina.valves中的类">ValveBase</a></h3>
<code><a href="../../../../org/apache/catalina/valves/ValveBase.html#asyncSupported">asyncSupported</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#container">container</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#containerLog">containerLog</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#next">next</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#sm">sm</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.catalina.util.LifecycleMBeanBase">
<!--   -->
</a>
<h3>从类继承的字段&nbsp;org.apache.catalina.util.<a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html" title="org.apache.catalina.util中的类">LifecycleMBeanBase</a></h3>
<code><a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#mserver">mserver</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.catalina.AccessLog">
<!--   -->
</a>
<h3>从接口继承的字段&nbsp;org.apache.catalina.AccessLog</h3>
<code>PROTOCOL_ATTRIBUTE, REMOTE_ADDR_ATTRIBUTE, REMOTE_HOST_ATTRIBUTE, SERVER_PORT_ATTRIBUTE</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.catalina.Lifecycle">
<!--   -->
</a>
<h3>从接口继承的字段&nbsp;org.apache.catalina.Lifecycle</h3>
<code>AFTER_DESTROY_EVENT, AFTER_INIT_EVENT, AFTER_START_EVENT, AFTER_STOP_EVENT, BEFORE_DESTROY_EVENT, BEFORE_INIT_EVENT, BEFORE_START_EVENT, BEFORE_STOP_EVENT, CONFIGURE_START_EVENT, CONFIGURE_STOP_EVENT, PERIODIC_EVENT, START_EVENT, STOP_EVENT</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#JDBCAccessLogValve--">JDBCAccessLogValve</a></span>()</code>
<div class="block">Class constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#close--">close</a></span>()</code>
<div class="block">Close the specified database connection.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#getConnectionName--">getConnectionName</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#getConnectionPassword--">getConnectionPassword</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#getCurrentTimeMillis--">getCurrentTimeMillis</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#getRequestAttributesEnabled--">getRequestAttributesEnabled</a></span>()</code></td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#getUseLongContentLength--">getUseLongContentLength</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#invoke-org.apache.catalina.connector.Request-org.apache.catalina.connector.Response-">invoke</a></span>(org.apache.catalina.connector.Request&nbsp;request,
      org.apache.catalina.connector.Response&nbsp;response)</code>
<div class="block">This method is invoked by Tomcat on each query.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#log-org.apache.catalina.connector.Request-org.apache.catalina.connector.Response-long-">log</a></span>(org.apache.catalina.connector.Request&nbsp;request,
   org.apache.catalina.connector.Response&nbsp;response,
   long&nbsp;time)</code>
<div class="block">Add the request/response to the access log using the specified processing
 time.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#open--">open</a></span>()</code>
<div class="block">Open (if necessary) and return a database connection for use by
 this AccessLogValve.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setBytesField-java.lang.String-">setBytesField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;bytesField)</code>
<div class="block">Sets the name of the field containing the number of bytes returned.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setConnectionName-java.lang.String-">setConnectionName</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;connectionName)</code>
<div class="block">Set the username to use to connect to the database.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setConnectionPassword-java.lang.String-">setConnectionPassword</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;connectionPassword)</code>
<div class="block">Set the password to use to connect to the database.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setConnectionURL-java.lang.String-">setConnectionURL</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;connectionURL)</code>
<div class="block">Sets the JDBC URL for the database where the log is stored.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setDriverName-java.lang.String-">setDriverName</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;driverName)</code>
<div class="block">Sets the database driver name.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setMethodField-java.lang.String-">setMethodField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;methodField)</code>
<div class="block">Sets the name of the field containing the HTTP request method.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setPattern-java.lang.String-">setPattern</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;pattern)</code>
<div class="block">Sets the logging pattern.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setQueryField-java.lang.String-">setQueryField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;queryField)</code>
<div class="block">Sets the name of the field containing the URL part of the HTTP query.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setRefererField-java.lang.String-">setRefererField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;refererField)</code>
<div class="block">Sets the name of the field containing the referer.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setRemoteHostField-java.lang.String-">setRemoteHostField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;remoteHostField)</code>
<div class="block">Sets the name of the field containing the remote host.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setRequestAttributesEnabled-boolean-">setRequestAttributesEnabled</a></span>(boolean&nbsp;requestAttributesEnabled)</code>
<div class="block">Should this valve set request attributes for IP address, hostname,
 protocol and port used for the request?</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setResolveHosts-java.lang.String-">setResolveHosts</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;resolveHosts)</code>
<div class="block">Determines whether IP host name resolution is done.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setStatusField-java.lang.String-">setStatusField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;statusField)</code>
<div class="block">Sets the name of the field containing the HTTP response status code.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setTableName-java.lang.String-">setTableName</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;tableName)</code>
<div class="block">Sets the name of the table where the logs are stored.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setTimestampField-java.lang.String-">setTimestampField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;timestampField)</code>
<div class="block">Sets the name of the field containing the server-determined timestamp.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setUseLongContentLength-boolean-">setUseLongContentLength</a></span>(boolean&nbsp;useLongContentLength)</code>&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setUserAgentField-java.lang.String-">setUserAgentField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;userAgentField)</code>
<div class="block">Sets the name of the field containing the user agent.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setUserField-java.lang.String-">setUserField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;userField)</code>
<div class="block">Sets the name of the field containing the remote user name.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#setVirtualHostField-java.lang.String-">setVirtualHostField</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;virtualHostField)</code>
<div class="block">Sets the name of the field containing the virtual host information
 (this is in fact the server name).</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#startInternal--">startInternal</a></span>()</code>
<div class="block">Start this component and implement the requirements
 of <a href="../../../../org/apache/catalina/util/LifecycleBase.html#startInternal--"><code>LifecycleBase.startInternal()</code></a>.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/catalina/valves/JDBCAccessLogValve.html#stopInternal--">stopInternal</a></span>()</code>
<div class="block">Stop this component and implement the requirements
 of <a href="../../../../org/apache/catalina/util/LifecycleBase.html#stopInternal--"><code>LifecycleBase.stopInternal()</code></a>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.catalina.valves.ValveBase">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.apache.catalina.valves.<a href="../../../../org/apache/catalina/valves/ValveBase.html" title="org.apache.catalina.valves中的类">ValveBase</a></h3>
<code><a href="../../../../org/apache/catalina/valves/ValveBase.html#backgroundProcess--">backgroundProcess</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#getContainer--">getContainer</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#getDomainInternal--">getDomainInternal</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#getNext--">getNext</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#getObjectNameKeyProperties--">getObjectNameKeyProperties</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#initInternal--">initInternal</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#isAsyncSupported--">isAsyncSupported</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#setAsyncSupported-boolean-">setAsyncSupported</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#setContainer-org.apache.catalina.Container-">setContainer</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#setNext-org.apache.catalina.Valve-">setNext</a>, <a href="../../../../org/apache/catalina/valves/ValveBase.html#toString--">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.catalina.util.LifecycleMBeanBase">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.apache.catalina.util.<a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html" title="org.apache.catalina.util中的类">LifecycleMBeanBase</a></h3>
<code><a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#destroyInternal--">destroyInternal</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#getDomain--">getDomain</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#getObjectName--">getObjectName</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#postDeregister--">postDeregister</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#postRegister-java.lang.Boolean-">postRegister</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#preDeregister--">preDeregister</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#preRegister-javax.management.MBeanServer-javax.management.ObjectName-">preRegister</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#register-java.lang.Object-java.lang.String-">register</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#setDomain-java.lang.String-">setDomain</a>, <a href="../../../../org/apache/catalina/util/LifecycleMBeanBase.html#unregister-javax.management.ObjectName-">unregister</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.catalina.util.LifecycleBase">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;org.apache.catalina.util.<a href="../../../../org/apache/catalina/util/LifecycleBase.html" title="org.apache.catalina.util中的类">LifecycleBase</a></h3>
<code><a href="../../../../org/apache/catalina/util/LifecycleBase.html#addLifecycleListener-org.apache.catalina.LifecycleListener-">addLifecycleListener</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#destroy--">destroy</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#findLifecycleListeners--">findLifecycleListeners</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#fireLifecycleEvent-java.lang.String-java.lang.Object-">fireLifecycleEvent</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#getState--">getState</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#getStateName--">getStateName</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#init--">init</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#removeLifecycleListener-org.apache.catalina.LifecycleListener-">removeLifecycleListener</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#setState-org.apache.catalina.LifecycleState-">setState</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#setState-org.apache.catalina.LifecycleState-java.lang.Object-">setState</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#start--">start</a>, <a href="../../../../org/apache/catalina/util/LifecycleBase.html#stop--">stop</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="java.lang中的类或接口">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="java.lang中的类或接口">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="java.lang中的类或接口">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="java.lang中的类或接口">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="java.lang中的类或接口">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="java.lang中的类或接口">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="java.lang中的类或接口">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="JDBCAccessLogValve--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JDBCAccessLogValve</h4>
<pre>public&nbsp;JDBCAccessLogValve()</pre>
<div class="block">Class constructor. Initializes the fields with the default values.
 The defaults are:
 <pre>
      driverName = null;
      connectionURL = null;
      tableName = "access";
      remoteHostField = "remoteHost";
      userField = "userName";
      timestampField = "timestamp";
      virtualHostField = "virtualHost";
      methodField = "method";
      queryField = "query";
      statusField = "status";
      bytesField = "bytes";
      refererField = "referer";
      userAgentField = "userAgent";
      pattern = "common";
      resolveHosts = false;
 </pre></div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="setRequestAttributesEnabled-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRequestAttributesEnabled</h4>
<pre>public&nbsp;void&nbsp;setRequestAttributesEnabled(boolean&nbsp;requestAttributesEnabled)</pre>
<div class="block">Should this valve set request attributes for IP address, hostname,
 protocol and port used for the request? This are typically used in
 conjunction with the <a href="../../../../org/apache/catalina/valves/AccessLogValve.html" title="org.apache.catalina.valves中的类"><code>AccessLogValve</code></a>
 which will otherwise log the original values.

 The attributes set are:
 <ul>
 <li>org.apache.catalina.RemoteAddr</li>
 <li>org.apache.catalina.RemoteHost</li>
 <li>org.apache.catalina.Protocol</li>
 <li>org.apache.catalina.ServerPost</li>
 </ul>
 Default is <code>true</code>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>setRequestAttributesEnabled</code>&nbsp;在接口中&nbsp;<code>org.apache.catalina.AccessLog</code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>requestAttributesEnabled</code> - <code>true</code> causes the attributes
                                  to be set, <code>false</code> disables
                                  the setting of the attributes.</dd>
</dl>
</li>
</ul>
<a name="getRequestAttributesEnabled--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRequestAttributesEnabled</h4>
<pre>public&nbsp;boolean&nbsp;getRequestAttributesEnabled()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>getRequestAttributesEnabled</code>&nbsp;在接口中&nbsp;<code>org.apache.catalina.AccessLog</code></dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if the attributes will be logged, otherwise
         <code>false</code></dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><code>AccessLog.setRequestAttributesEnabled(boolean)</code></dd>
</dl>
</li>
</ul>
<a name="getConnectionName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnectionName</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;getConnectionName()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the username to use to connect to the database.</dd>
</dl>
</li>
</ul>
<a name="setConnectionName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setConnectionName</h4>
<pre>public&nbsp;void&nbsp;setConnectionName(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;connectionName)</pre>
<div class="block">Set the username to use to connect to the database.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>connectionName</code> - Username</dd>
</dl>
</li>
</ul>
<a name="setDriverName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDriverName</h4>
<pre>public&nbsp;void&nbsp;setDriverName(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;driverName)</pre>
<div class="block">Sets the database driver name.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>driverName</code> - The complete name of the database driver class.</dd>
</dl>
</li>
</ul>
<a name="getConnectionPassword--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnectionPassword</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;getConnectionPassword()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the password to use to connect to the database.</dd>
</dl>
</li>
</ul>
<a name="setConnectionPassword-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setConnectionPassword</h4>
<pre>public&nbsp;void&nbsp;setConnectionPassword(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;connectionPassword)</pre>
<div class="block">Set the password to use to connect to the database.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>connectionPassword</code> - User password</dd>
</dl>
</li>
</ul>
<a name="setConnectionURL-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setConnectionURL</h4>
<pre>public&nbsp;void&nbsp;setConnectionURL(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;connectionURL)</pre>
<div class="block">Sets the JDBC URL for the database where the log is stored.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>connectionURL</code> - The JDBC URL of the database.</dd>
</dl>
</li>
</ul>
<a name="setTableName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTableName</h4>
<pre>public&nbsp;void&nbsp;setTableName(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;tableName)</pre>
<div class="block">Sets the name of the table where the logs are stored.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>tableName</code> - The name of the table.</dd>
</dl>
</li>
</ul>
<a name="setRemoteHostField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRemoteHostField</h4>
<pre>public&nbsp;void&nbsp;setRemoteHostField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;remoteHostField)</pre>
<div class="block">Sets the name of the field containing the remote host.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>remoteHostField</code> - The name of the remote host field.</dd>
</dl>
</li>
</ul>
<a name="setUserField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUserField</h4>
<pre>public&nbsp;void&nbsp;setUserField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;userField)</pre>
<div class="block">Sets the name of the field containing the remote user name.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>userField</code> - The name of the remote user field.</dd>
</dl>
</li>
</ul>
<a name="setTimestampField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTimestampField</h4>
<pre>public&nbsp;void&nbsp;setTimestampField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;timestampField)</pre>
<div class="block">Sets the name of the field containing the server-determined timestamp.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>timestampField</code> - The name of the server-determined timestamp field.</dd>
</dl>
</li>
</ul>
<a name="setVirtualHostField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVirtualHostField</h4>
<pre>public&nbsp;void&nbsp;setVirtualHostField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;virtualHostField)</pre>
<div class="block">Sets the name of the field containing the virtual host information
 (this is in fact the server name).</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>virtualHostField</code> - The name of the virtual host field.</dd>
</dl>
</li>
</ul>
<a name="setMethodField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMethodField</h4>
<pre>public&nbsp;void&nbsp;setMethodField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;methodField)</pre>
<div class="block">Sets the name of the field containing the HTTP request method.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>methodField</code> - The name of the HTTP request method field.</dd>
</dl>
</li>
</ul>
<a name="setQueryField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setQueryField</h4>
<pre>public&nbsp;void&nbsp;setQueryField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;queryField)</pre>
<div class="block">Sets the name of the field containing the URL part of the HTTP query.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>queryField</code> - The name of the field containing the URL part of
 the HTTP query.</dd>
</dl>
</li>
</ul>
<a name="setStatusField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStatusField</h4>
<pre>public&nbsp;void&nbsp;setStatusField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;statusField)</pre>
<div class="block">Sets the name of the field containing the HTTP response status code.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>statusField</code> - The name of the HTTP response status code field.</dd>
</dl>
</li>
</ul>
<a name="setBytesField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBytesField</h4>
<pre>public&nbsp;void&nbsp;setBytesField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;bytesField)</pre>
<div class="block">Sets the name of the field containing the number of bytes returned.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>bytesField</code> - The name of the returned bytes field.</dd>
</dl>
</li>
</ul>
<a name="setRefererField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRefererField</h4>
<pre>public&nbsp;void&nbsp;setRefererField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;refererField)</pre>
<div class="block">Sets the name of the field containing the referer.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>refererField</code> - The referer field name.</dd>
</dl>
</li>
</ul>
<a name="setUserAgentField-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUserAgentField</h4>
<pre>public&nbsp;void&nbsp;setUserAgentField(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;userAgentField)</pre>
<div class="block">Sets the name of the field containing the user agent.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>userAgentField</code> - The name of the user agent field.</dd>
</dl>
</li>
</ul>
<a name="setPattern-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPattern</h4>
<pre>public&nbsp;void&nbsp;setPattern(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;pattern)</pre>
<div class="block">Sets the logging pattern. The patterns supported correspond to the
 file-based "common" and "combined". These are translated into the use
 of tables containing either set of fields.
 <P><I>TO DO: more flexible field choices.</I></P></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>pattern</code> - The name of the logging pattern.</dd>
</dl>
</li>
</ul>
<a name="setResolveHosts-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setResolveHosts</h4>
<pre>public&nbsp;void&nbsp;setResolveHosts(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;resolveHosts)</pre>
<div class="block">Determines whether IP host name resolution is done.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>resolveHosts</code> - "true" or "false", if host IP resolution
 is desired or not.</dd>
</dl>
</li>
</ul>
<a name="getUseLongContentLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUseLongContentLength</h4>
<pre>public&nbsp;boolean&nbsp;getUseLongContentLength()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd><code>true</code> if content length should be considered a long
  rather than an int, defaults to <code>false</code></dd>
</dl>
</li>
</ul>
<a name="setUseLongContentLength-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUseLongContentLength</h4>
<pre>public&nbsp;void&nbsp;setUseLongContentLength(boolean&nbsp;useLongContentLength)</pre>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>useLongContentLength</code> - the useLongContentLength to set</dd>
</dl>
</li>
</ul>
<a name="invoke-org.apache.catalina.connector.Request-org.apache.catalina.connector.Response-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>invoke</h4>
<pre>public&nbsp;void&nbsp;invoke(org.apache.catalina.connector.Request&nbsp;request,
                   org.apache.catalina.connector.Response&nbsp;response)
            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a>,
                   javax.servlet.ServletException</pre>
<div class="block">This method is invoked by Tomcat on each query.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code><a href="../../../../org/apache/catalina/Valve.html#invoke-org.apache.catalina.connector.Request-org.apache.catalina.connector.Response-">invoke</a></code>&nbsp;在接口中&nbsp;<code><a href="../../../../org/apache/catalina/Valve.html" title="org.apache.catalina中的接口">Valve</a></code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>request</code> - The Request object.</dd>
<dd><code>response</code> - The Response object.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code> - Should not be thrown.</dd>
<dd><code>javax.servlet.ServletException</code> - Database SQLException is wrapped
 in a ServletException.</dd>
</dl>
</li>
</ul>
<a name="log-org.apache.catalina.connector.Request-org.apache.catalina.connector.Response-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>public&nbsp;void&nbsp;log(org.apache.catalina.connector.Request&nbsp;request,
                org.apache.catalina.connector.Response&nbsp;response,
                long&nbsp;time)</pre>
<div class="block"><span class="descfrmTypeLabel">从接口复制的说明:&nbsp;<code>org.apache.catalina.AccessLog</code></span></div>
<div class="block">Add the request/response to the access log using the specified processing
 time.</div>
<dl>
<dt><span class="overrideSpecifyLabel">指定者:</span></dt>
<dd><code>log</code>&nbsp;在接口中&nbsp;<code>org.apache.catalina.AccessLog</code></dd>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>request</code> - Request (associated with the response) to log</dd>
<dd><code>response</code> - Response (associated with the request) to log</dd>
<dd><code>time</code> - Time taken to process the request/response in
                  milliseconds (use 0 if not known)</dd>
</dl>
</li>
</ul>
<a name="open--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>protected&nbsp;void&nbsp;open()
             throws <a href="https://docs.oracle.com/javase/8/docs/api/java/sql/SQLException.html?is-external=true" title="java.sql中的类或接口">SQLException</a></pre>
<div class="block">Open (if necessary) and return a database connection for use by
 this AccessLogValve.</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/sql/SQLException.html?is-external=true" title="java.sql中的类或接口">SQLException</a></code> - if a database error occurs</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>protected&nbsp;void&nbsp;close()</pre>
<div class="block">Close the specified database connection.</div>
</li>
</ul>
<a name="startInternal--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startInternal</h4>
<pre>protected&nbsp;void&nbsp;startInternal()
                      throws org.apache.catalina.LifecycleException</pre>
<div class="block">Start this component and implement the requirements
 of <a href="../../../../org/apache/catalina/util/LifecycleBase.html#startInternal--"><code>LifecycleBase.startInternal()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">覆盖:</span></dt>
<dd><code><a href="../../../../org/apache/catalina/valves/ValveBase.html#startInternal--">startInternal</a></code>&nbsp;在类中&nbsp;<code><a href="../../../../org/apache/catalina/valves/ValveBase.html" title="org.apache.catalina.valves中的类">ValveBase</a></code></dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.catalina.LifecycleException</code> - if this component detects a fatal error
  that prevents this component from being used</dd>
</dl>
</li>
</ul>
<a name="stopInternal--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopInternal</h4>
<pre>protected&nbsp;void&nbsp;stopInternal()
                     throws org.apache.catalina.LifecycleException</pre>
<div class="block">Stop this component and implement the requirements
 of <a href="../../../../org/apache/catalina/util/LifecycleBase.html#stopInternal--"><code>LifecycleBase.stopInternal()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">覆盖:</span></dt>
<dd><code><a href="../../../../org/apache/catalina/valves/ValveBase.html#stopInternal--">stopInternal</a></code>&nbsp;在类中&nbsp;<code><a href="../../../../org/apache/catalina/valves/ValveBase.html" title="org.apache.catalina.valves中的类">ValveBase</a></code></dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code>org.apache.catalina.LifecycleException</code> - if this component detects a fatal error
  that prevents this component from being used</dd>
</dl>
</li>
</ul>
<a name="getCurrentTimeMillis--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCurrentTimeMillis</h4>
<pre>public&nbsp;long&nbsp;getCurrentTimeMillis()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
