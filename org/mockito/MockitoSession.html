<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_112) on Sat Sep 01 15:36:09 CST 2018 -->
<title>MockitoSession</title>
<meta name="date" content="2018-09-01">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MockitoSession";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],4:["t3","抽象方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.mockito</div>
<h2 title="接口 MockitoSession" class="title">接口 MockitoSession</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Incubating
public interface <span class="typeNameLabel">MockitoSession</span></pre>
<div class="block"><code>MockitoSession</code> is an optional, highly recommended feature
 that helps driving cleaner tests by eliminating boilerplate code and adding extra validation.
 If you already use <a href="../../org/mockito/junit/MockitoJUnitRunner.html" title="org.mockito.junit中的类"><code>MockitoJUnitRunner</code></a> or <a href="../../org/mockito/junit/MockitoRule.html" title="org.mockito.junit中的接口"><code>MockitoRule</code></a>
 *you don't need* <code>MockitoSession</code> because it is used by the runner/rule.
 <p>
 <code>MockitoSession</code> is a session of mocking, during which the user creates and uses Mockito mocks.
 Typically the session is an execution of a single test method.
 <code>MockitoSession</code> initializes mocks, validates usage and detects incorrect stubbing.
 When the session is started it must be concluded with <a href="../../org/mockito/MockitoSession.html#finishMocking--"><code>finishMocking()</code></a>
 otherwise <code>UnfinishedMockingSessionException</code> is triggered when the next session is created.
 <p>
 <code>MockitoSession</code> is useful when you cannot use <a href="../../org/mockito/junit/MockitoJUnitRunner.html" title="org.mockito.junit中的类"><code>MockitoJUnitRunner</code></a> or <a href="../../org/mockito/junit/MockitoRule.html" title="org.mockito.junit中的接口"><code>MockitoRule</code></a>.
 For example, you work with TestNG instead of JUnit.
 Another example is when different JUnit runner is in use (Jukito, Springockito)
 and it cannot be combined with Mockito's own runner.
 <p>
 Framework integrators are welcome to use <code>MockitoSession</code> and give us feedback by commenting on
 <a href="https://github.com/mockito/mockito/issues/857">issue 857</a>.
 <p>

 Example:
 <pre class="code"><code class="java">
 public class ExampleTest {
     &#064;Mock Foo foo;

     //Keeping session object in a field so that we can complete session in 'tear down' method.
     //It is recommended to hide the session object, along with 'setup' and 'tear down' methods in a base class / runner.
     //Keep in mind that you can use Mockito's JUnit runner or rule instead of MockitoSession and get the same behavior.
     MockitoSession mockito;

     &#064;Before public void setup() {
         //initialize session to start mocking
         mockito = Mockito.mockitoSession()
            .initMocks(this)
            .strictness(Strictness.STRICT_STUBS)
            .startMocking();
     }

     &#064;After public void tearDown() {
         //It is necessary to finish the session so that Mockito
         // can detect incorrect stubbing and validate Mockito usage
         //'finishMocking()' is intended to be used in your test framework's 'tear down' method.
         mockito.finishMocking();
     }

     // test methods ...
 }
 </code></pre>

 <p>
 Why to use <code>MockitoSession</code>?
 What's the difference between <code>MockitoSession</code>, <a href="../../org/mockito/junit/MockitoJUnitRunner.html" title="org.mockito.junit中的类"><code>MockitoJUnitRunner</code></a>, <a href="../../org/mockito/junit/MockitoRule.html" title="org.mockito.junit中的接口"><code>MockitoRule</code></a>
 and traditional <a href="../../org/mockito/MockitoAnnotations.html#initMocks-java.lang.Object-"><code>MockitoAnnotations.initMocks(Object)</code></a>?
 <p>
 Great questions!
 There is no need to use <code>MockitoSession</code> if you already use <a href="../../org/mockito/junit/MockitoJUnitRunner.html" title="org.mockito.junit中的类"><code>MockitoJUnitRunner</code></a> or <a href="../../org/mockito/junit/MockitoRule.html" title="org.mockito.junit中的接口"><code>MockitoRule</code></a>.
 If you are JUnit user who does not leverage Mockito rule or runner we strongly recommend to do so.
 Both the runner and the rule support strict stubbing which can really help driving cleaner tests.
 See <code>MockitoJUnitRunner.StrictStubs</code> and <a href="../../org/mockito/junit/MockitoRule.html#strictness-org.mockito.quality.Strictness-"><code>MockitoRule.strictness(Strictness)</code></a>.
 If you cannot use Mockito's JUnit support (for example, you are on TestNG) <code>MockitoSession</code> exactly is for you!
 You can automatically take advantage of strict stubbing (<a href="../../org/mockito/quality/Strictness.html" title="org.mockito.quality中的枚举"><code>Strictness</code></a>),
 automatic initialization of annotated mocks (<a href="../../org/mockito/MockitoAnnotations.html" title="org.mockito中的类"><code>MockitoAnnotations</code></a>),
 and extra validation (<a href="../../org/mockito/Mockito.html#validateMockitoUsage--"><code>Mockito.validateMockitoUsage()</code></a>).
 If you use Mockito annotations with <a href="../../org/mockito/MockitoAnnotations.html#initMocks-java.lang.Object-"><code>MockitoAnnotations.initMocks(Object)</code></a>
 but not Mockito runner/rule please try out Mockito's JUnit support (runner or rule) or
 start using <code>MockitoSession</code>. You'll get cleaner tests and better productivity.
 <p>
 Mockito team would really appreciate feedback about <code>MockitoSession</code> API.
 Help us out by commenting at <a href="https://github.com/mockito/mockito/issues/857">issue 857</a>.</div>
<dl>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>2.7.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">抽象方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/mockito/MockitoSession.html#finishMocking--">finishMocking</a></span>()</code>
<div class="block">Must be invoked when the user is done with mocking for given session (test method).</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/mockito/MockitoSession.html#finishMocking-java.lang.Throwable-">finishMocking</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="java.lang中的类或接口">Throwable</a>&nbsp;failure)</code>
<div class="block">Must be invoked when the user is done with mocking for given session (test method).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../org/mockito/MockitoSession.html#setStrictness-org.mockito.quality.Strictness-">setStrictness</a></span>(<a href="../../org/mockito/quality/Strictness.html" title="org.mockito.quality中的枚举">Strictness</a>&nbsp;strictness)</code>
<div class="block">Changes the strictness of this <code>MockitoSession</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="setStrictness-org.mockito.quality.Strictness-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStrictness</h4>
<pre>@Incubating
void&nbsp;setStrictness(<a href="../../org/mockito/quality/Strictness.html" title="org.mockito.quality中的枚举">Strictness</a>&nbsp;strictness)</pre>
<div class="block">Changes the strictness of this <code>MockitoSession</code>.
 The new strictness will be applied to operations on mocks and checks performed by <a href="../../org/mockito/MockitoSession.html#finishMocking--"><code>finishMocking()</code></a>.
 This method is used behind the hood by <a href="../../org/mockito/junit/MockitoRule.html#strictness-org.mockito.quality.Strictness-"><code>MockitoRule.strictness(Strictness)</code></a> method.
 In most healthy tests, this method is not needed.
 We keep it for edge cases and when you really need to change strictness in given test method.
 For use cases see Javadoc for <code>PotentialStubbingProblem</code> class.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>strictness</code> - new strictness for this session.</dd>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>2.15.0</dd>
</dl>
</li>
</ul>
<a name="finishMocking--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishMocking</h4>
<pre>@Incubating
void&nbsp;finishMocking()</pre>
<div class="block">Must be invoked when the user is done with mocking for given session (test method).
 It detects unused stubbings and may throw <code>UnnecessaryStubbingException</code>
 or emit warnings (<a href="../../org/mockito/quality/MockitoHint.html" title="org.mockito.quality中的接口"><code>MockitoHint</code></a>) depending on the <a href="../../org/mockito/quality/Strictness.html" title="org.mockito.quality中的枚举"><code>Strictness</code></a> level.
 The method also detects incorrect Mockito usage via <a href="../../org/mockito/Mockito.html#validateMockitoUsage--"><code>Mockito.validateMockitoUsage()</code></a>.
 <p>
 In order to implement <a href="../../org/mockito/quality/Strictness.html" title="org.mockito.quality中的枚举"><code>Strictness</code></a> Mockito session keeps track of mocking using <a href="../../org/mockito/listeners/MockitoListener.html" title="org.mockito.listeners中的接口"><code>MockitoListener</code></a>.
 This method cleans up the listeners and ensures there is no leftover state after the session finishes.
 It is necessary to invoke this method to conclude mocking session.
 For more information about session lifecycle see <a href="../../org/mockito/session/MockitoSessionBuilder.html#startMocking--"><code>MockitoSessionBuilder.startMocking()</code></a>.
 <p>
 This method is intended to be used in your test framework's 'tear down' method.
 In the case of JUnit it is the "&#064;After" method.
 <p>
 For example, see javadoc for <a href="../../org/mockito/MockitoSession.html" title="org.mockito中的接口"><code>MockitoSession</code></a>.</div>
<dl>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>2.7.0</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../org/mockito/MockitoSession.html#finishMocking-java.lang.Throwable-"><code>finishMocking(Throwable)</code></a></dd>
</dl>
</li>
</ul>
<a name="finishMocking-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finishMocking</h4>
<pre>@Incubating
void&nbsp;finishMocking(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="java.lang中的类或接口">Throwable</a>&nbsp;failure)</pre>
<div class="block">Must be invoked when the user is done with mocking for given session (test method).
 When a <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="java.lang中的类或接口">failure</a> is specified, certain checks are disabled to avoid
 confusion that may arise because there are multiple competing failures. Other than that,
 this method behaves exactly like <a href="../../org/mockito/MockitoSession.html#finishMocking--"><code>finishMocking()</code></a>.
 <p>
 This method is intended to be used by framework integrations. When using MockitoSession
 directly, most users should rather use <a href="../../org/mockito/MockitoSession.html#finishMocking--"><code>finishMocking()</code></a>.
 <a href="../../org/mockito/junit/MockitoRule.html" title="org.mockito.junit中的接口"><code>MockitoRule</code></a> uses this method behind the hood.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>failure</code> - the exception that caused the test to fail; passing <code>null</code> is permitted</dd>
<dt><span class="simpleTagLabel">从以下版本开始:</span></dt>
<dd>2.15.0</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../org/mockito/MockitoSession.html#finishMocking--"><code>finishMocking()</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</body>
</html>
